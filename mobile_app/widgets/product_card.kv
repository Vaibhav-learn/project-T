#:kivy 2.0.0

<ProductCard@MDCard>:
    orientation: 'vertical'
    size_hint_y: None
    height: '290dp'
    padding: '8dp'
    spacing: '4dp'
    elevation: 2
    radius: [12,]
    md_bg_color: 1, 1, 1, 1
    
    # Sold out overlay support
    RelativeLayout:
        size_hint_y: 0.6
        Image:
            source: root.image
            allow_stretch: True
            keep_ratio: False
        MDLabel:
            text: root.sold_out_text if hasattr(root, 'sold_out_text') and root.sold_out_text else ''
            font_size: '18sp'
            color: 1, 0, 0, 0.7
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    MDLabel:
        text: root.name
        font_size: '15sp'
        halign: 'left'
        bold: True
        color: 0.2, 0.2, 0.2, 1
        size_hint_y: None
        height: self.texture_size[1]
    MDLabel:
        text: root.category if hasattr(root, 'category') and root.category else ''
        font_size: '13sp'
        halign: 'left'
        color: 0.5, 0.5, 0.5, 1
        size_hint_y: None
        height: self.texture_size[1]
    MDLabel:
        text: root.price
        font_size: '14sp'
        halign: 'left'
        bold: True
        color: 0.2, 0.2, 0.2, 1
        size_hint_y: None
        height: self.texture_size[1]
    MDLabel:
        text: root.secondary_label if hasattr(root, 'secondary_label') and root.secondary_label else 'MRP incl. of all taxes'
        font_size: '11sp'
        halign: 'left'
        color: 0.5, 0.5, 0.5, 1
        size_hint_y: None
        height: self.texture_size[1]
    MDIconButton:
        icon: 'heart' if root.heart_filled else 'heart-outline'
        theme_text_color: 'Custom'
        text_color: (1,0,0,1) if root.heart_filled else (0.5,0.5,0.5,1)
        user_font_size: '20sp'
        pos_hint: {'right': 1, 'y': 0}
        opacity: 1 if root.show_heart else 0
        disabled: not root.show_heart
        on_release: root.heart_press_callback(root) if root.heart_press_callback else None 